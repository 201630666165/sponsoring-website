/*Â© yizanzhu.com*/!function(t){"use strict";var e=t.HTMLCanvasElement&&t.HTMLCanvasElement.prototype,n=t.Blob&&function(){try{return Boolean(new Blob)}catch(t){return!1}}(),i=n&&t.Uint8Array&&function(){try{return 100===new Blob([new Uint8Array(100)]).size}catch(t){return!1}}(),r=t.BlobBuilder||t.WebKitBlobBuilder||t.MozBlobBuilder||t.MSBlobBuilder,a=(n||r)&&t.atob&&t.ArrayBuffer&&t.Uint8Array&&function(t){var e,a,o,s,f,c;for(e=t.split(",")[0].indexOf("base64")>=0?atob(t.split(",")[1]):decodeURIComponent(t.split(",")[1]),a=new ArrayBuffer(e.length),o=new Uint8Array(a),s=0;s<e.length;s+=1)o[s]=e.charCodeAt(s);return f=t.split(",")[0].split(":")[1].split(";")[0],n?new Blob([i?o:a],{type:f}):(c=new r,c.append(a),c.getBlob(f))};t.HTMLCanvasElement&&!e.toBlob&&(e.mozGetAsFile?e.toBlob=function(t,n,i){t(i&&e.toDataURL&&a?a(this.toDataURL(n,i)):this.mozGetAsFile("blob",n))}:e.toDataURL&&a&&(e.toBlob=function(t,e,n){t(a(this.toDataURL(e,n)))})),t.dataURLtoBlob=a}(window),function(t,e){"use strict";function n(t,e,n,i,r){var a={type:n.type||n,target:t,result:i};z(a,r),e(a)}function i(t){return m&&!!m.prototype["readAs"+t]}function r(t,r,a,o){if(O.isBlob(t)&&i(a)){var s=new m;M(s,T,function c(e){var i=e.type;"progress"==i?n(t,r,e,e.target.result,{loaded:e.loaded,total:e.total}):"loadend"==i?(P(s,T,c),s=null):n(t,r,e,e.target.result)});try{o?s["readAs"+a](t,o):s["readAs"+a](t)}catch(f){n(t,r,"error",e,{error:f.toString()})}}else n(t,r,"error",e,{error:"filreader_not_support_"+a})}function a(t,e){if(!t.type&&t.size%4096===0&&t.size<=102400)if(m)try{var n=new m;j(n,T,function(t){var i="error"!=t.type;e(i),i&&n.abort()}),n.readAsDataURL(t)}catch(i){e(!1)}else e(null);else e(!0)}function o(t){var e;return t.getAsEntry?e=t.getAsEntry():t.webkitGetAsEntry&&(e=t.webkitGetAsEntry()),e}function s(t,e){if(t)if(t.isFile)t.file(function(n){n.fullPath=t.fullPath,e(!1,[n])},function(t){e("FileError.code: "+t.code)});else if(t.isDirectory){var n=t.createReader(),i=[],r=function(){e("directory_reader")},a=function f(t){t.length?O.afor(t,function(t,e){s(e,function(e,a){e||(i=i.concat(a)),t?t():n.readEntries(f,r)})}):e(!1,i)};n.readEntries(a,r)}else s(o(t),e);else e("invalid entry")}function f(t){return(t.originalEvent||t||"").dataTransfer||{}}var c=1,u=function(){},l=t.document,d=(l.doctype||{},t.navigator.userAgent),p=t.createObjectURL&&t||t.URL&&URL.revokeObjectURL&&URL||t.webkitURL&&webkitURL,h=t.Blob,g=t.File,m=t.FileReader,v=t.FormData,y=t.XMLHttpRequest,w=t.jQuery,A=!(!(g&&m&&(t.Uint8Array||v||y.prototype.sendAsBinary))||/safari\//i.test(d)&&!/chrome\//i.test(d)&&/windows/i.test(d)),x=A&&"withCredentials"in new y,b=A&&!!h&&!!(h.prototype.webkitSlice||h.prototype.mozSlice||h.prototype.slice),R=/img/i,E=/canvas/i,F={}.toString,U=t.Math,B=function(e){return e=new t.Number(U.pow(1024,e)),e.from=function(t){return U.round(t*this)},e},I={},L=[],T="abort progress error load loadend",D="currentTarget",_="preventDefault",k=function(t){return t&&"length"in t},C=function(t,e,n){if(t)if(k(t))for(var i=0,r=t.length;r>i;i++)i in t&&e.call(n,t[i],i,t);else for(var a in t)t.hasOwnProperty(a)&&e.call(n,t[a],a,t)},z=function(t){for(var e=arguments,n=1,i=function(e,n){t[n]=e};n<e.length;n++)C(e[n],i);return t},M=function(t,e,n){if(t){var i=O.uid(t);I[i]||(I[i]={});var r=m&&t&&t instanceof m;C(e.split(/\s+/),function(e){w&&!r?w.event.add(t,e,n):(I[i][e]||(I[i][e]=[]),I[i][e].push(n),t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent?t.attachEvent("on"+e,n):t["on"+e]=n)})}},P=function(t,e,n){if(t){var i=O.uid(t),r=I[i]||{},a=m&&t&&t instanceof m;C(e.split(/\s+/),function(e){if(w&&!a)w.event.remove(t,e,n);else{for(var i=r[e]||[],o=i.length;o--;)if(i[o]===n){i.splice(o,1);break}t.addEventListener?t.removeEventListener(e,n,!1):t.detachEvent?t.detachEvent("on"+e,n):t["on"+e]=null}})}},j=function(t,e,n){M(t,e,function i(r){P(t,e,i),n(r)})},q=function(e){return e.target||(e.target=t.event&&t.event.srcElement||l),3===e.target.nodeType&&(e.target=e.target.parentNode),e},N=function(t){var e=l.createElement("input");return e.setAttribute("type","file"),t in e},O={version:"2.0.10",cors:!1,html5:!0,media:!1,formData:!0,multiPassResize:!0,debug:!1,pingUrl:!1,withCredentials:!0,staticPath:"./dist/",postNameConcat:function(t,e){return t+(null!=e?"["+e+"]":"")},ext2mime:{jpg:"image/jpeg",tif:"image/tiff",txt:"text/plain"},accept:{"image/*":"art bm bmp dwg dxf cbr cbz fif fpx gif ico iefs jfif jpe jpeg jpg jps jut mcf nap nif pbm pcx pgm pict pm png pnm qif qtif ras rast rf rp svf tga tif tiff xbm xbm xpm xwd","audio/*":"m4a flac aac rm mpa wav wma ogg mp3 mp2 m3u mod amf dmf dsm far gdm imf it m15 med okt s3m stm sfx ult uni xm sid ac3 dts cue aif aiff wpl ape mac mpc mpp shn wv nsf spc gym adplug adx dsp adp ymf ast afc hps xs","video/*":"m4v 3gp nsv ts ty strm rm rmvb m3u ifo mov qt divx xvid bivx vob nrg img iso pva wmv asf asx ogm m2v avi bin dat dvr-ms mpg mpeg mp4 mkv avc vp3 svq3 nuv viv dv fli flv wpl"},uploadRetry:0,networkDownRetryTimeout:5e3,chunkSize:0,chunkUploadRetry:0,chunkNetworkDownRetryTimeout:2e3,KB:B(1),MB:B(2),GB:B(3),TB:B(4),EMPTY_PNG:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQIW2NkAAIAAAoAAggA9GkAAAAASUVORK5CYII=",expando:"fileapi"+(new Date).getTime(),uid:function(t){return t?t[O.expando]=t[O.expando]||O.uid():(++c,O.expando+c)},log:function(){O.debug&&t.console&&console.log&&console.log.apply&&console.log.apply(console,arguments)},newImage:function(t,e){var n=l.createElement("img");return e&&O.event.one(n,"error load",function(t){e("error"==t.type,n),n=null}),n.src=t,n},isArray:k,support:{dnd:x&&"ondrop"in l.createElement("div"),cors:x,html5:A,chunked:b,dataURI:!0,accept:N("accept"),multiple:N("multiple")},event:{on:M,off:P,one:j,fix:q},F:function(){},defer:function(){var t,n,i=[],r={resolve:function(e,a){for(r.resolve=u,n=e||!1,t=a;a=i.shift();)a(n,t)},then:function(r){n!==e?r(n,t):i.push(r)}};return r},queue:function(t){var e=0,n=0,i=!1,r=!1,a={inc:function(){n++},next:function(){e++,setTimeout(a.check,0)},check:function(){e>=n&&!i&&a.end()},isFail:function(){return i},fail:function(){!i&&t(i=!0)},end:function(){r||(r=!0,t())}};return a},each:C,afor:function(t,e){var n=0,i=t.length;k(t)&&i--?!function r(){e(i!=n&&r,t[n],n++)}():e(!1)},extend:z,isFile:function(t){return"[object File]"===F.call(t)},isBlob:function(t){return this.isFile(t)||"[object Blob]"===F.call(t)},isCanvas:function(t){return t&&E.test(t.nodeName)},getFilesFilter:function(t){return t="string"==typeof t?t:t.getAttribute&&t.getAttribute("accept")||"",t?new RegExp("("+t.replace(/\./g,"\\.").replace(/,/g,"|")+")$","i"):/./},readAsDataURL:function(t,e){O.isCanvas(t)?n(t,e,"load",O.toDataURL(t)):r(t,e,"DataURL")},toDataURL:function(t,e){return"string"==typeof t?t:t.toDataURL?t.toDataURL(e||"image/png"):void 0},readAsImage:function(t,i,r){if(O.isFile(t))if(p){var a=p.createObjectURL(t);a===e?n(t,i,"error"):O.readAsImage(a,i,r)}else O.readAsDataURL(t,function(e){"load"==e.type?O.readAsImage(e.result,i,r):(r||"error"==e.type)&&n(t,i,e,null,{loaded:e.loaded,total:e.total})});else if(O.isCanvas(t))n(t,i,"load",t);else if(R.test(t.nodeName))if(t.complete)n(t,i,"load",t);else{var o="error abort load";j(t,o,function f(e){"load"==e.type&&p&&p.revokeObjectURL(t.src),P(t,o,f),n(t,i,e,t)})}else if(t.iframe)n(t,i,{type:"error"});else{var s=O.newImage(t.dataURL||t);O.readAsImage(s,i,r)}},getDropFiles:function(t,e){var n=[],i=f(t),r=k(i.items)&&i.items[0]&&o(i.items[0]),c=O.queue(function(){e(n)});C((r?i.items:i.files)||[],function(t){c.inc();try{r?s(t,function(t,e){t?O.log("[err] getDropFiles:",t):n.push.apply(n,e),c.next()}):a(t,function(e){e&&n.push(t),c.next()})}catch(e){c.next(),O.log("[err] getDropFiles: ",e)}}),c.check()},getFiles:function(t,e,n){var i=[];return n?(O.filterFiles(O.getFiles(t),e,n),null):(t.jquery&&(t.each(function(){i=i.concat(O.getFiles(this))}),t=i,i=[]),"string"==typeof e&&(e=O.getFilesFilter(e)),t.originalEvent?t=q(t.originalEvent):t.srcElement&&(t=q(t)),t.dataTransfer?t=t.dataTransfer:t.target&&(t=t.target),t.files?i=t.files:k(t)&&(i=t),O.filter(i,function(t){return!e||e.test(t.name)}))},getInfo:function(t,e){var n={},i=L.concat();O.isFile(t)?!function r(){var a=i.shift();a?a.test(t.type)?a(t,function(t,i){t?e(t):(z(n,i),r())}):r():e(!1,n)}():e("not_support_info",n)},addInfoReader:function(t,e){e.test=function(e){return t.test(e)},L.push(e)},filter:function(t,e){for(var n,i=[],r=0,a=t.length;a>r;r++)r in t&&(n=t[r],e.call(n,n,r,t)&&i.push(n));return i},filterFiles:function(t,e,n){if(t.length){var i,r=t.concat(),a=[],o=[];!function s(){r.length?(i=r.shift(),O.getInfo(i,function(t,n){(e(i,t?!1:n)?a:o).push(i),s()})):n(a,o)}()}else n([],t)},reset:function(t,e){var n;return w&&(n=w(t).clone(!0).insertBefore(t).val("")[0],e||w(t).remove()),n}};O.addInfoReader(/^image/,function(t,e){if(!t.__dimensions){var n=t.__dimensions=O.defer();O.readAsImage(t,function(t){var e=t.target;n.resolve("load"==t.type?!1:"error",{width:e.width,height:e.height}),e.src=O.EMPTY_PNG,e=null})}t.__dimensions.then(e)}),O.event.dnd=function(t,e,n){var i,r;n||(n=e,e=O.F),m?(M(t,"dragenter dragleave dragover",e.ff=e.ff||function(t){for(var n=f(t).types,a=n&&n.length,o=!1;a--;)if(~n[a].indexOf("File")){t[_](),r!==t.type&&(r=t.type,"dragleave"!=r&&e.call(t[D],!0,t),o=!0);break}o&&(clearTimeout(i),i=setTimeout(function(){e.call(t[D],"dragleave"!=r,t)},50))}),M(t,"drop",n.ff=n.ff||function(t){t[_](),r=0,e.call(t[D],!1,t),O.getDropFiles(t,function(e){n.call(t[D],e,t)})})):O.log("Drag'n'Drop -- not supported")},O.event.dnd.off=function(t,e,n){P(t,"dragenter dragleave dragover",e.ff),P(t,"drop",n.ff)},w&&!w.fn.dnd&&(w.fn.dnd=function(t,e){return this.each(function(){O.event.dnd(this,t,e)})},w.fn.offdnd=function(t,e){return this.each(function(){O.event.dnd.off(this,t,e)})}),t.FileAPI=z(O,t.FileAPI)}(window,void 0),function(t,e,n){"use strict";function i(e){if(e instanceof i){var n=new i(e.file);return t.extend(n.matrix,e.matrix),n}return this instanceof i?(this.file=e,this.size=e.size||100,void(this.matrix={sx:0,sy:0,sw:0,sh:0,dx:0,dy:0,dw:0,dh:0,resize:0,deg:0,quality:1,filter:0})):new i(e)}var r=Math.min,a=Math.round,o=function(){return e.createElement("canvas")},s=!1;try{s=o().toDataURL("image/png").indexOf("data:image/png")>-1}catch(f){}i.prototype={image:!0,constructor:i,set:function(e){return t.extend(this.matrix,e),this},crop:function(t,e,i,r){return i===n&&(i=t,r=e,t=e=0),this.set({sx:t,sy:e,sw:i,sh:r||i})},resize:function(t,e,n){return/min|max|height|width/.test(e)&&(n=e,e=t),this.set({dw:t,dh:e||t,resize:n})},preview:function(t,e){return this.resize(t,e||t,"preview")},rotate:function(t){return this.set({deg:t})},filter:function(t){return this.set({filter:t})},clone:function(){return new i(this)},_load:function(e,n){var i=this;/img|video/i.test(e.nodeName)?n.call(i,null,e):t.readAsImage(e,function(t){n.call(i,"load"!=t.type,t.result)})},_apply:function(e,n){var i,a=o(),s=this.getMatrix(e),f=a.getContext("2d"),c=e.videoWidth||e.width,u=e.videoHeight||e.height,l=s.deg,d=s.dw,p=s.dh,h=c,g=u,m=(s.filter,e),v=t.queue(function(){e.src=t.EMPTY_PNG,n(!1,a)}),y=t.renderImageToCanvas;for(l-=360*Math.floor(l/360),e._type=this.file.type;s.multipass&&r(h/d,g/p)>2;)h=h/2+.5|0,g=g/2+.5|0,i=o(),i.width=h,i.height=g,m!==e?(y(i,m,0,0,m.width,m.height,0,0,h,g),m=i):(m=i,y(m,e,s.sx,s.sy,s.sw,s.sh,0,0,h,g),s.sx=s.sy=s.sw=s.sh=0);a.width=l%180?p:d,a.height=l%180?d:p,a.type=s.type,a.quality=s.quality,f.rotate(l*Math.PI/180),y(f.canvas,m,s.sx,s.sy,s.sw||m.width,s.sh||m.height,180==l||270==l?-d:0,90==l||180==l?-p:0,d,p),d=a.width,p=a.height,v.check()},getMatrix:function(e){var n=t.extend({},this.matrix),i=n.sw=n.sw||e.videoWidth||e.naturalWidth||e.width,o=n.sh=n.sh||e.videoHeight||e.naturalHeight||e.height,s=n.dw=n.dw||i,f=n.dh=n.dh||o,c=i/o,u=s/f,l=n.resize;if("preview"==l){if(s!=i||f!=o){var d,p;u>=c?(d=i,p=d/u):(p=o,d=p*u),(d!=i||p!=o)&&(n.sx=~~((i-d)/2),n.sy=~~((o-p)/2),i=d,o=p)}}else"height"==l?s=f*c:"width"==l?f=s/c:l&&(i>s||o>f?"min"==l?(s=a(u>c?r(i,s):f*c),f=a(u>c?s/c:r(o,f))):(s=a(c>=u?r(i,s):f*c),f=a(c>=u?s/c:r(o,f))):(s=i,f=o));return n.sw=i,n.sh=o,n.dw=s,n.dh=f,n.multipass=t.multiPassResize,n},_trans:function(e){this._load(this.file,function(n,i){if(n)e(n);else try{this._apply(i,e)}catch(n){t.log("[err] FileAPI.Image.fn._apply:",n),e(n)}})},get:function(e){if(t.support.transform){var n=this,i=n.matrix;"auto"==i.deg?t.getInfo(n.file,function(t,r){i.deg=0,n._trans(e)}):n._trans(e)}else e("not_support_transform");return this},toData:function(t){return this.get(t)}},i.transform=function(e,r,a,o){function s(s,f){var c={},u=t.queue(function(t){o(t,c)});s?u.fail():t.each(r,function(t,r){if(!u.isFail()){var o=new i(f.nodeType?f:e),s="function"==typeof t;if(s?t(f,o):t.width?o[t.preview?"preview":"resize"](t.width,t.height,t.strategy):t.maxWidth&&(f.width>t.maxWidth||f.height>t.maxHeight)&&o.resize(t.maxWidth,t.maxHeight,"max"),t.crop){var l=t.crop;o.crop(0|l.x,0|l.y,l.w||l.width,l.h||l.height)}t.rotate===n&&a&&(t.rotate="auto"),o.set({type:o.matrix.type||t.type||e.type||"image/png"}),s||o.set({deg:t.rotate,filter:t.filter,quality:t.quality||1}),u.inc(),o.toData(function(t,e){t?u.fail():(c[r]=e,u.next())})}})}e.width?s(!1,e):t.getInfo(e,s)},t.each(["TOP","CENTER","BOTTOM"],function(e,n){t.each(["LEFT","CENTER","RIGHT"],function(t,r){i[e+"_"+t]=3*n+r,i[t+"_"+e]=3*n+r})}),i.toCanvas=function(t){var n=e.createElement("canvas");return n.width=t.videoWidth||t.width,n.height=t.videoHeight||t.height,n.getContext("2d").drawImage(t,0,0),n},t.renderImageToCanvas=function(e,n,i,r,a,o,s,f,c,u){try{return e.getContext("2d").drawImage(n,i,r,a,o,s,f,c,u)}catch(l){throw t.log("renderImageToCanvas failed"),l}},t.support.canvas=t.support.transform=s,t.Image=i}(FileAPI,document);